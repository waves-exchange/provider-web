<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Title</title>
        <style>
            html,
            body,
            #root {
                position: relative;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                margin: 0;
                padding: 0;
                height: 100%;
                width: 100%;
                overflow: hidden;
                -webkit-overflow-scrolling: touch;
            }

            * {
                box-sizing: border-box;
            }
        </style>
        <script src="../node_modules/@waves/waves-js/dist/waves-js.js"></script>
        <script src="../dist/storage-provider.min.js"></script>
        <script>
            var provider = new storageProvider.StorageProvider(
                'http://localhost:8081/iframe-entry'
            );
            var waves = new signer.Waves({
                NODE_URL: 'https://pool.testnet.wavesnodes.com',
            });
            waves.setProvider(provider);

            var getByElement = function(element, key, defaultValue) {
                return element.getAttribute(`data-${key}`) || defaultValue;
            };

            /**
             * @param {HTMLElement} element
             */
            window.transfer = function(element) {
                return waves
                    .transfer({
                        amount: getByElement(element, 'amount', 1),
                        recipient: getByElement(element, 'recipient', 'merry'),
                        assetId: getByElement(element, 'assetId', null),
                        feeAssetId: getByElement(element, 'feeAssetId', null),
                        fee: getByElement(element, 'fee', undefined),
                        attachment: getByElement(element, 'attachment', ''),
                    })
                    .broadcast();
            };
        </script>
    </head>

    <body>
        <div>
            <h1>Clear</h1>
            <button onclick="localStorage.clear()">Clear storage</button>
        </div>
        <div>
            <h1>Login</h1>
            <button onclick="waves.login();">Login</button>
        </div>
        <div style="display: flex; flex-direction: column;">
            <h2>
                Transfer
            </h2>
            <button
                onclick="transfer(this);"
                data-amount="10000000"
                data-recipient="merry"
            >
                Transfer 1 Waves to Merry
            </button>
            <button
                onclick="transfer(this);"
                data-amount="10000000"
                data-recipient="merry"
                data-feeAssetId="DWgwcZTMhSvnyYCoWLRUXXSH1RSkzThXLJhww9gwkqdn"
            >
                Transfer 1 Waves to Merry with custom Fee
            </button>
            <button
                onclick="transfer(this);"
                data-amount="10000000"
                data-recipient="3PCAB4sHXgvtu5NPoen6EXR5yaNbvsEA8Fj"
            >
                Transfer 1 Waves to Merry by address with custom Fee
            </button>
            <button
                onclick="transfer(this);"
                data-amount="10000000"
                data-recipient="3PCAB4sHXgvtu5NPoen6EXR5yaNbvsEA8Fj"
                data-attachment="72k1xXWG59fYdzSNoA"
            >
                Transfer 1 Waves to Merry by address with custom Fee With short
                attachment
            </button>
        </div>
        <div>
            <h2>Invoke</h2>
            <button
                onclick="waves.invoke({
        dApp: 'alias:T:merry',
        payment: [
            { assetId: null, amount: 1},
        ],
        call: { function: 'test', args: [
            { type: 'string', value: 'string' },
            { type: 'integer', value: 123123123 },
            { type: 'boolean', value: true },
            { type: 'binary', value: 'base64:AAIDAAAAAAAAAAQIARIAAAAAAAAAAAEAAAABaQEAAAADZm9vAAAAAAkBAAAACFdyaXRlU2V0AAAAAQUAAAADbmlsAAAAACvwfcA=' }
        ] },
        fee: 1000
    }).broadcast();"
            >
                Invoke
            </button>
        </div>
        <div>
            <h2>
                Data
            </h2>
            <button
                onclick="waves.data({
        data: [
            { key: 'key', value: 'world', type: 'string' },
            { key: 'key', value: 'world', type: 'string' },
            { key: 'key', value: 'world', type: 'string' },
            { key: 'AAAAAAAAAAAEAAAABaQEAAAADZm9v', value: 'world', type: 'string' },
            { key: 'key', value: 123123123, type: 'integer' },
            { key: 'key', value: true, type: 'boolean',},
        ]
    }).broadcast();"
            >
                Data
            </button>
        </div>
    </body>
</html>
